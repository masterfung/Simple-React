<!DOCTYPE html>

<html lang="en">
<head>
  <meta charset="utf-8">

  <title>Message Box</title>
  <meta name="description" content="Message Box">
  <meta name="author" content="@masterfung Tsung Hung">

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">

  <!--[if lt IE 9]>
  <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
</head>

<body>

  <div id="app">

  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.13.2/react-with-addons.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.13.2/JSXTransformer.js"></script>

  <script type='text/jsx'>


    var HowArtThou = React.createClass({
      render: function() {
        return (
          <div className="">
            <h3 className="text-center">How is your day?</h3>
          </div>
        )
      }
    });

    var Words = React.createClass({
      getPropTypes: function() {
        return {
          echo : React.PropTypes.string.isRequired
        }
      },

      render: function() {
        return (
          <div className="">
            {this.props.echo}
          </div>
        )
      }
    });

    var MessageBox = React.createClass({
      getInitialState: function() {
        return {
          isVisible: true,
          statement: 'Hello There!',
          echos: ["There are great liability to great powers!",
            "I hear whispers of power and efficiency!",
            "How can there be a giant zebra in this room? We need two!",
            "Eating veggies will insure world peace!",
            "Hopes of the future can easily be seen from the eyes of now!",
            "Smile be WowWow!"
          ]
        }
      },

      getPropTypes: function() {
        return {
          date : React.PropTypes.string.isRequired
        }
      },

      handleAction: function(e) {
        var userEntered = this.refs.userInput.getDOMNode().value
        var newMessage = this.state.echos.concat([userEntered]);
        this.setState({
          echos: newMessage
        })
      },

      render: function() {
        var messages = this.state.echos.map(function(echo, index) {
          return <h4 key={index}><Words echo={echo}/></h4>;
        });

        var check_visibility = {
          show: this.state.isVisible ? 'block' : 'none'

        }
        return (
          <div className='jumbotron' style={check_visibility}>
            <h1 className='text-center'>{this.state.statement}</h1>
            <p className="text-center">
              {this.props.date}
            </p>
            <HowArtThou />
            <input className="form-control" type="text" ref="userInput" placeholder="Enter Awesomeness Here" />{' '}
            <button className="btn btn-primary" type="submit" onClick={this.handleAction}>Add</button>
            {messages}
          </div>
        )
      }
    });



    var renderComponent = React.render(
      <MessageBox date={new Date().getTime()}/>,
      document.getElementById('app')
    )
  </script>
</body>
</html>
